\documentclass[12pt, a4paper]{article}
\usepackage[a4paper, includeheadfoot, mag=1000, left=2cm, right=1.5cm, top=1.5cm, bottom=1.5cm, headsep=0.8cm, footskip=0.8cm]{geometry}
% Fonts
\usepackage{fontspec, unicode-math}
\setmainfont[Ligatures=TeX]{CMU Serif}
\setmonofont{CMU Typewriter Text}
\usepackage[english, russian]{babel}
% Indent first paragraph
\usepackage{indentfirst}
\setlength{\parskip}{5pt}
% Diagrams
\usepackage{graphicx}
\usepackage{float}
% Page headings
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt}
\setlength{\headheight}{16pt}
%\newfontfamily\namefont[Scale=1.2]{Gloria Hallelujah}
\fancyhead{}
\usepackage{ragged2e}

\usepackage{multirow}

\usepackage{listings}
\lstdefinestyle{lablisting}{
  basicstyle=\scriptsize\ttfamily,
  numbers=left,
  stepnumber=1,
  otherkeywords={EOF, O\_RDONLY, STDIN\_FILENO, STDOUT\_FILENO, STDERR\_FILENO},
  numbersep=10pt,
  showspaces=false,
  showstringspaces=false
}

\graphicspath{ {images/} }

\newcommand{\specialcell}[2][l]{%
  \begin{tabular}[#1]{@{}c@{}}#2\end{tabular}}

\newcommand{\figc}[4]{
  \begin{figure}[H]
  \begin{center}
    \includegraphics[scale=#4]{#1}
    \caption{#2}
    \label{fig:#3}
  \end{center}
  \end{figure}
}

\begin{document}

% Title page
\begin{titlepage}
\begin{center}

\textsc{Национальный исследовательский университет ИТМО\\[4mm]
Факультет программной инженерии и компьютерной техники}
\vfill
\textbf{Учебно-исследовательская работа №5\\[4mm]
по дисципение Сети ЭВМ и телекоммуникации\\[4mm]
Технологии QoS в компьютерных сетях\\[16mm]
}
\begin{flushright}
Студент: Саржевский Иван
\\[2mm]Группа: P3302
\end{flushright}
\vfill
г. Санкт-Петербург\\[2mm]
2020 г.

\end{center}
\end{titlepage}

\tableofcontents
\newpage

\justify

\section{Цель}

Изучение эффективности приоритезации трафика для управления качеством
обслуживания (Quality of Service, QoS) в компьютерных сетях. 

\section{Исходные данные}

\begin{center}
\begin{tabular}{c c}
  \texttt{S} & \texttt{10} Кб\\
  \texttt{N} & \texttt{4} Кб\\
  \texttt{K} & \texttt{2}\\
\end{tabular}
\end{center}

\section{Ход работы}

С использованием программы \texttt{Wireshark} было захвачено по 10000
пакетов для трафика \texttt{Skype} и ВПЗ. Для трансляции ВПЗ был выбран
сайт \texttt{webinar.ru}. Примеры захваченного трафика можно увидеть на
рисунках \ref{fig:s_t} и \ref{fig:v_t}.

\figc{skype_traffic}{\texttt{Skype}-трафик.}{s_t}{1.0}
\figc{vod_traffic}{ВПЗ-трафик.}{v_t}{0.8}

По полученным данным были построены фукции распределения для интервалов
между пакетами и размеров пакетов для каждого вида трафика. Полученные
функции распределения представлены на рисунках \ref{fig:s_f}-\ref{fig:v_s}.

\figc{charts/skype_f_time}{Функция распределения для интервалов между пакетами \texttt{Skype}}{s_f}{0.75}
\figc{charts/skype_f_size}{Функция распределения для размеров пакетов \texttt{Skype}}{s_s}{0.75}
\figc{charts/vod_f_time}{Функция распределения для интервалов между пакетами ВПЗ}{v_f}{0.75}
\figc{charts/vod_f_size}{Функция распределения для размеров пакетов ВПЗ}{v_s}{0.75}

Значения интервалов между пакетами во всех случаях были округлены до
пятого знака после запятой и умножены на 1000 (перевод в мс.).

Затем, с использованием полученных распределений и предложенной
\texttt{AnyLogic}-модели, был произведен поиск такого минимального значения
пропускной способности канала связи, при котором характеристики передачи
данных все еще соответствуют нормам \textbf{\texttt{ITU-T Y.1541}}, которые можно
увидеть в таблице \ref{Tab:itu}.

\begin{table}[H]
  \begin{center}
  \caption{Нормы \texttt{ITU-T Y.1541}}
  \begin{tabular}{| c | c | c |}
    \hline
    Характеристика & \texttt{Skype} & \texttt{VoD}\\\hline
    Задержка, мс & 100 & 1000\\\hline
    Джиттер, мс & 50 & -\\\hline
    Потеря пакетов, \% & \texttt{0.1} & \texttt{0.1}\\\hline
  \end{tabular}
  \label{Tab:itu}
  \end{center}
\end{table}

\subsection{\texttt{FIFO}}

Очередь без приоритезации. Настройки \texttt{AnyLogic}-модели можно увидеть
на рисунке \ref{fig:f_set}.

\figc{bp/settings}{Настройки модели, \texttt{FIFO}}{f_set}{1.0}

Значения характеристик при параметрах, заданных в варианте, можно увидеть
на рисунке \ref{fig:f_v}.

\figc{bp/C4E10BP}{Характеристики при параметрах, заданных в варианте, \texttt{FIFO}}{f_v}{1.0}

В процессе варьирования пропускной способности было установлено, что
её минимальное значение, при котором все характеристики не превышают
норму равно \texttt{25750} Кб/с. Вероятность потери при этом равна
\texttt{0.001} (\texttt{0.1\%}), а задержка 0.32 мс. (при норме в 100 мс).
Это можно увидеть на рисунке \ref{fig:f_c}.

Так же, во время варьирования были зафиксированы
все промежуточные значения вероятности потери заявок и задержки, по которым
были построены графики, представленные на рисунках \ref{fig:f_l} и \ref{fig:f_d}.

\figc{bp/C25_75E10BP}{Характеристики при параметрах, полученных в результате варьирования, \texttt{FIFO}}{f_c}{1.0}
\figc{charts/bp_loss}{Зависимость вероятности потери от пропускной способности, \texttt{FIFO}}{f_l}{0.8}
\figc{charts/bp_delay}{Зависимость задержки от пропускной способности, \texttt{FIFO}}{f_d}{0.8}

В целом можно отметить, что при увеличении пропускной способности канала, как
и ожидалось, вероятность потери и задержка падают, при этом они начинают соответсвовать
поставленным требованиям начиная с \texttt{25750} Кб/с.

\subsection{\texttt{PQ}}

ДО с относительными приоритетами. Трафик низкоприоритетного класса передается
только в случае, когда нет ни одного пакета высокоприоритетного класса, который
бы претендовал на передачу. Такой подход улучшает качество передачи пакетов
высокоприоритетного класса, но в тоже время делает это за счет
низкоприоритетных пакетов.

Настройки \texttt{AnyLogic}-модели можно увидеть
на рисунке \ref{fig:p_set}.

\figc{op/settings}{Настройки модели, \texttt{PQ}}{p_set}{1.0}

Значения характеристик при параметрах, заданных в варианте, можно увидеть
на рисунке \ref{fig:p_v}.

\figc{op/C4E10OP}{Характеристики при параметрах, заданных в варианте, \texttt{PQ}}{p_v}{1.0}

В процессе варьирования пропускной способности было установлено, что
её минимальное значение, при котором все характеристики не превышают
норму равно \texttt{25500} Кб/с. Вероятность потери при этом равна
\texttt{0.001} (\texttt{0.1\%}), а задержка 0.41 мс и 0.125 мс
для скайпа и ВПЗ соответственно (при норме в 100 мс).
Это можно увидеть на рисунке \ref{fig:p_c}.

Так же, во время варьирования были зафиксированы
все промежуточные значения вероятности потери заявок и задержки, по которым
были построены графики, представленные на рисунках \ref{fig:p_l} и \ref{fig:p_d}.

\figc{op/C25_5E10OP}{Характеристики при параметрах, полученных в результате варьирования, \texttt{PQ}}{p_c}{1.0}
\figc{charts/op_loss}{Зависимость вероятности потери от пропускной способности, \texttt{PQ}}{p_l}{0.8}
\figc{charts/op_delay}{Зависимость задержки от пропускной способности, \texttt{PQ}}{p_d}{0.8}

В целом можно отметить, что при увеличении пропускной способности канала, как
и ожидалось, вероятность потери и задержка падают для обоих типов пакетов,
при этом они начинают соответсвовать поставленным требованиям начиная с \texttt{25500} Кб/с.

\subsection{\texttt{WFQ}}

ДО со взвешенным честным обслуживанием. Каждому виду трафика назначается некий вес,
при этом из очереди выбирается такое количество пакетов, что их суммарные размеры
соотносятся как заданные веса. Таким образом, с одной стороны, есть гарантия, что
пакеты с большим весом будут иметь приоритет, но в то же время, в условиях перегрузок
низкоприоритетные пакеты будут обслуживаться за конечное время.

Настройки \texttt{AnyLogic}-модели можно увидеть
на рисунке \ref{fig:w_set}. Вес пакетов \texttt{Skype} равен \texttt{0.67}, что в
\texttt{K = 2} раза больше, чем вес пакетов ВПЗ, равный \texttt{0.33}.

\figc{wfq/settings}{Настройки модели, \texttt{WFQ}}{w_set}{1.0}

Значения характеристик при параметрах, заданных в варианте, можно увидеть
на рисунке \ref{fig:w_v}.

\figc{wfq/C4E10WFQ}{Характеристики при параметрах, заданных в варианте, \texttt{WFQ}}{w_v}{1.0}

В процессе варьирования пропускной способности было установлено, что
её минимальное значение, при котором все характеристики не превышают
норму равно \texttt{26950} Кб/с. Вероятность потери при этом равна
\texttt{0.001} (\texttt{0.1\%}), а задержка 0 мс и 0.302 мс
для скайпа и ВПЗ соответственно (при норме в 100 мс).
Это можно увидеть на рисунке \ref{fig:w_c}.

Так же, во время варьирования были зафиксированы
все промежуточные значения вероятности потери заявок и задержки, по которым
были построены графики, представленные на рисунках \ref{fig:w_l} и \ref{fig:w_d}.

\figc{wfq/C26_95E10WFQ}{Характеристики при параметрах, полученных в результате варьирования, \texttt{WFQ}}{w_c}{1.0}
\figc{charts/wfq_loss}{Зависимость вероятности потери от пропускной способности, \texttt{WFQ}}{w_l}{0.8}
\figc{charts/wfq_delay}{Зависимость задержки от пропускной способности, \texttt{WFQ}}{w_d}{0.8}

В целом можно отметить, что при увеличении пропускной способности канала, как
и ожидалось, вероятность потери и задержка падают для обоих типов пакетов,
при этом они начинают соответсвовать поставленным требованиям начиная с \texttt{26950} Кб/с.

Помимо прочего, было проведено варьирование весов классов заявок. В результате этого варьирования
было установлено, что если установить \texttt{w1 = 0.95} и \texttt{w2 = 0.05} (\texttt{K = 19}),
то можно добиться уменьшения необходимой пропускной способности до \texttt{26575} Кб/с,
что можно увидетьь на рисунке \ref{fig:w_k}.

\figc{wfq/C26_575E10WFQ_modified}{Характеристики при параметрах, полученных в результате варьирования \texttt{K}, \texttt{WFQ}}{w_k}{1.0}

\end{document}
