\documentclass[12pt, a4paper]{article}
\usepackage[a4paper, includeheadfoot, mag=1000, left=2cm, right=1.5cm, top=1.5cm, bottom=1.5cm, headsep=0.8cm, footskip=0.8cm]{geometry}
% Fonts
\usepackage{fontspec, unicode-math}
\setmainfont[Ligatures=TeX]{CMU Serif}
\setmonofont{CMU Typewriter Text}
\usepackage[english, russian]{babel}
% Indent first paragraph
\usepackage{indentfirst}
\setlength{\parskip}{5pt}
% Diagrams
\usepackage{graphicx}
\usepackage{float}
% Page headings
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt}
\setlength{\headheight}{16pt}
%\newfontfamily\namefont[Scale=1.2]{Gloria Hallelujah}
\fancyhead{}
\usepackage{ragged2e}

\usepackage{multirow}

\usepackage{listings}
\lstdefinestyle{lablisting}{
  basicstyle=\scriptsize\ttfamily,
  numbers=left,
  stepnumber=1,
  otherkeywords={EOF, O\_RDONLY, STDIN\_FILENO, STDOUT\_FILENO, STDERR\_FILENO},
  numbersep=10pt,
  showspaces=false,
  showstringspaces=false
}

\graphicspath{ {images/} }

\newcommand{\specialcell}[2][l]{%
  \begin{tabular}[#1]{@{}c@{}}#2\end{tabular}}

\newcommand{\fig}[4]{
  \begin{figure}[h]
    \includegraphics[scale=#4]{#1}
    \caption{#2}
    \label{fig:#3}
  \end{figure}
}

\newcommand{\figc}[4]{
  \begin{center}
    \fig{#1}{#2}{#3}{#4}
  \end{center}
}

\begin{document}

% Title page
\begin{titlepage}
\begin{center}

\textsc{Национальный исследовательский университет ИТМО\\[4mm]
Факультет программной инженерии и компьютерной техники}
\vfill
\textbf{Учебно-исследовательская работа №3\\[4mm]
по дисципение Сети ЭВМ и телекоммуникации\\[4mm]
Анализ трафика компьютерных сетей утилитой Wireshark\\[16mm]
}
\begin{flushright}
Студент: Саржевский Иван
\\[2mm]Группа: P3302
\end{flushright}
\vfill
г. Санкт-Петербург\\[2mm]
2020 г.

\end{center}
\end{titlepage}

\tableofcontents
\newpage

\justify

\section{Цель}

Цель работы – изучить структуру протокольных блоков данных, анализируя реальный
трафик на компьютере студента с помощью бесплатно распространяемой утилиты
\texttt{Wireshark}.

\section{Утилита \texttt{ping}}

Для анализа трафика, создаваемого утилитой \texttt{ping} был выбран сайт
\textbf{\texttt{www.ias.ru}}.

\figc{ping_headers}{Заголовки протоколов для команды \texttt{ping}.}{p_h}{3.0}

На рисунке \ref{fig:p_h} изображены заголовки различных протоколов, используемых
при передаче запроса.

\subsection{Фрейм}

\figc{ping_frame}{Информация о фрейме команды \texttt{ping}.}{p_f}{3.0}

Структура, представленная на рисунке \ref{fig:p_f}, описывает метаданные
Wireshark для этого запроса - его порядковый номер среди всех записанных,
время прибытия, размер, протокол и цвет выделения в интерфейсе.

\subsection{Ethernet II}

Ethernet II - протокол канального уровня, т.е. описывает передачу данных в
рамках локальной сети. Типичная структура кадра Ethernet II представлена в
таблице \ref{Tab:ethernet_frame}.

\begin{table}[h]
\begin{center}
\begin{small}
  \begin{tabular}{| c | c | c | c | c |}
    \hline
    \multicolumn{5}{|c|}{\specialcell[c]{Кадр Ethernet II\\ (от 64-х до 1528-ти байт)}}\\
    \hline
    \multicolumn{3}{|c|}{\specialcell[c]{MAC-заголовок\\ (14 байт)}} & \specialcell[c]{Данные\\ (от 46-ти до 1500 байт)} & --\\
    \hline
    \specialcell[c]{MAC получателя\\ (6 байт)} & \specialcell[c]{MAC отправителя\\ (6 байт)} & \specialcell[c]{Тип протокола\\ (2 байта)} & Данные & \specialcell[c]{CRC\\ (4 байта)}\\
    \hline
  \end{tabular}
  \caption{Структура кадра Ethernet II.}
  \label{Tab:ethernet_frame}
\end{small}
\end{center}
\end{table}

В данном случае получателем выступает роутер, а отправителем - рабочая машина,
их MAC-адреса записаны в кадр, тип протокола - \texttt{IPv4}, что можно увидеть
на рисунке \ref{fig:p_e}.

\figc{ping_ethernet}{Кадр Ethernet II для \texttt{ping}.}{p_e}{3.0}

\end{document}
